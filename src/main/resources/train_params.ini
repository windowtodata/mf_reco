# Training Pipeline Configuration
# train_params.ini

[data]
# Data source
data_path = /workspace/data/surfside-eng-ml-take-home-6-recommender.csv
end_date = 2025-09-10
num_days = 31
test_fraction = 0.2

# Output directories
output_base = /workspace/model_data
train_base = /workspace/model_train

[ray]
ray_cluster = http://localhost:8265

[model]
# Matrix Factorization hyperparameters
n_factors = 16
learning_rate = 0.005
batch_size = 512
epochs = 10
reg_lambda = 0.001

# LSH parameters for fast basket-item lookup
lsh_num_hash_tables = 5
lsh_num_hash_functions = 10

# Column mappings
user_col = network_userid
item_col = item_id
rating_col = item_quantity
order_col = order_id
date_col = datestamp

[training]
# Ray configuration
ray_address = auto
num_cpus = 8
use_gpu = true

# Model paths
checkpoint_base = /workspace/model_checkpoints
latest_model_dir = /workspace/models/latest
model_dir = /workspace/models
metrics_dir = /workspace/model_metrics

# Checkpointing
save_checkpoints = true
checkpoint_frequency = 5

[mlflow]
enabled = false
tracking_uri = http://172.18.0.1:5000
experiment_name = mf_recommender
s3_endpoint_url = http://172.18.0.1:9000
aws_access_key_id = minio
aws_secret_access_key = minio123
s3_bucket = mlflow

[influxdb]
enabled = false
url = http://172.18.0.1:8086
token = your_token_here
org = myorg
bucket = monitoring

[evaluation]
# Evaluation metrics
top_k = 10
ndcg_k = 10
min_similarity = 0.0

[spark]
# Spark configuration for data pipeline (RayDP)
app_name = MFDataPipeline
num_executors = 2
executor_cores = 2
executor_memory = 2g
shuffle_partitions = 8
